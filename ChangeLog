2001-11-06 Sergey Poznyakoff

	* radlib/envar.c: Syntax cleanup.
	* radlib/argcv.c: Likewise.
	* radlib/client.c: Likewise.
	* radlib/cryptpass.c: Likewise.
	* radlib/dbm.c: Likewise.
	* radlib/nas.c: Likewise.
	* radlib/symtab.c: Likewise.
	* radlib/users.l: Likewise.
	* radlib/raddb.c: Likewise.
	* snmplib/snmp_send.c: Likewise.
	* snmplib/snmp_sess.c: Likewise.
	* snmplib/snmp_mib.c: Likewise.
	* radscm/rscm_utmp.c: Likewise.
	* radscm/rscm_lib.c: Likewise.
	* radscm/radscm.h: Likewise.
	* radiusd/auth.c: Likewise.
	* radiusd/files.c: Likewise.
	* radiusd/proxy.c: Likewise.
	* radiusd/radiusd.c: Likewise.
	* radiusd/radutil.c: Likewise.
	* radiusd/rewrite.y: Likewise.
	* radiusd/log.c: Likewise..

	* raduse/raduse.c: Bugfix.
	* radiusd/scheme.c: Bugfix in scheme_auth.

	* radiusd/checkrad.c: finger_check(): Get argument from the
	`arg' envar.
	* raddb/naslist: Reflect the new variable (arg).
	* raddb/config: Removed usedbm and notify clauses.

	* scripts/config-conv.awk: Changed default channel to
	"radius.log", for compatibility.
	* scripts/Makefile.am: Added config-conv.

	* raddb/Makefile.am: Name dictionary backup file dictionary~.

	* NEWS: Finally converted to human-readable form.
	* configure.in: Increased version patchlevel.
	* README-alpha: (new)
	* Makefile.am: Added README-alpha.

	* doc/texinfo/.ispell_english: updated
	* doc/texinfo/operation.texi: updated

2001-11-01 Sergey Poznyakoff

	* radiusd/rewrite.y: Fixed bug in yylex() which prevented
	binary % from being recognized. Thanks to Clement Gerouville.
	
2001-10-31 Sergey Poznyakoff

	* radlib/util.c: removed debug_pair().
	format_pair(): Use format_string_visual() to format string
	attributes (useful for Password). Changed size of buf2
	accordingly.
	pairstr_format(): Renamed to format_vendor_pair().
	* include/radius.h: removed debug_pair().
	* include/radiusd.h: Likewise.

	* radiusd/radius.c: Use regular debug() instead of debug_pair().
	* radiusd/proxy.c: Likewise.
	* radiusd/radiusd.c: Put a reminder before duping stdout to
	file. It shall go away soon.

2001-10-30 Sergey Poznyakoff

	* client/pam_radius/pam_radius.c: Fixes forgotten to apply
	2001-10-14.
	* radiusd/log.c: Typo in log_to_channel().

2001-10-28 Sergey Poznyakoff

	* doc/texinfo/Makefile.am: Rule for generating postscript
	output.
	* doc/texinfo/configure.texi: Updated.
	* doc/texinfo/acct.texi: Likewise.
	* doc/texinfo/attributes.texi: Likewise.
	* doc/texinfo/auth.texi: Likewise.
	* doc/texinfo/configure.texi: Likewise.
	* doc/texinfo/invoke.texi: Likewise.
	* doc/texinfo/operation.texi: Likewise.
	* doc/texinfo/radctl.texi: Likewise.
	* doc/texinfo/radius.texi: Likewise.

	* TODO: Updated.

2001-10-26 Sergey Poznyakoff

	* radlib/util.c: New function format_string_visual(): format a
	string of possibly intermixed printable and non-printable characters.
	pairstr_format(): Use format_string_visual() to format vendor-specific
	pairs.
	* include/radius.h: Declaration of format_string_visual().

	* doc/texinfo/configure.texi: Documented message statement.

2001-10-25 Sergey Poznyakoff

	* radiusd/auth.c: Fixed bug in req_decrypt_password (possible
	dereference of NULL pointer).

2001-10-22 Sergey Poznyakoff

	Configurable reply-messages. The messages are defined under
	`message' block in raddb/config	file. The % substitutions
	are allowed in messages.

	* include/radius.h: Extern declaration for do_not_resolve.
	* include/radiusd.h: Added message identifiers, extern decl
	for message_text. Changed proto of rad_check_multi.

	* radiusd/acct.c: rad_check_multi(): Return also number
	of concurrent logins.
	* radiusd/auth.c: User-defined messages instead of hardcoded ones.
	* radiusd/config.kw: Added new keywords.
	* radiusd/config.y: Handle message statement.
	* radiusd/radiusd.c: Provide defaults for the reply messages.
	* radiusd/radutil.c: Split off radius_xlate0 from radius_xlate.
	Fixed a couple of bugs.

	* raddb/dictionary: New atrribute Password-Expire-Days.

	* raddb/config.syntax: Example of message statement.
	
	* TODO: Updated.
	
2001-10-19 Sergey Poznyakoff

	* THANKS: Ajoute Clement Gerouville.
	* TODO: Updated.

2001-10-19 Clement Gerouville

	* radiusd/radiusd.c: Un detail mise en configuration par
	defaut de : int auth_detail = 0; Ajout de l'option -N (do-not-resolve)
	no reverse DNS lookup.
	Un etrange Hack de la fonction rad_spawn_child():
	Preferons remplacer une vieille requette (REQUEST * to_replace)
	plutot que dropper la nouvelle en attendant que le garbage-collector
	libere de la place. On peut raisonnablement penser que la reponse a
	ete recue par le NAS. Ameliore sensiblement le nombre de
	requettes/secondes du serveur.
	* radlib/iputil.c: Ajout de l'option -N (do-not-resolve)
	Bugfix d'un potentiel probleme : 'unlinking' de la requette si
	le fork() faille.
	* radlib/mem.c: multiple free() dans certaines conditions (unsigned
	char hp->s.nref == 255, hp->s.nref++ :)
	cela est arrive en faisant un benchmark avec toujours le meme username.

2001-10-18 Sergey Poznyakoff

	* radlib/envar.c: New function envar_parse_argcv().
	* include/envar.h: Proto for envar_parse_argcv().

	* include/radius.h: Removed fcnt argument from the read_raddb_file
	proto.
	* radlib/raddb.c: Likewise.
	* radlib/dict.c: Likewise.
	* radiusd/files.c: Likewise. Added checks for maximum number of
	fields, where applicable. Possibly should use nfields() from
	dict.c for this.
	Use envar_parse_argcv instead of envar_parse.
	* radlib/nas.c: Likewise. 
	
	* radiusd/.gdbinit: Synchronized with namespace cleanup from
	2001-10-16.

	* radlib/argcv.c: Ignore trailing whitespace: fixed.

	* TODO: Updated.

2001-10-18 Sergey Poznyakoff

	Changed way of reading raddb/ files. Not thoroughly tested, though.

	* radlib/getline.c: (new) Read line of arbitrary length from
	a stream.
	* radlib/Makefile.am: Added getline.c
	* radlib/argcv.c: Ignore trailing whitespace.
	* radlib/raddb.c: Use getline+argcv_get.

	* TODO: Updated.

2001-10-18 Sergey Poznyakoff
	
	Removed length limit on shared secret. Files affected:

	* include/radclient.h:
	* include/radiusd.h: 
	* radiusd/files.c:
	* radlib/client.c:
	* radscm/radscm.c:

	* NEWS: Updated.

	* doc/texinfo/.cvsignore: Updated.
	* doc/texinfo/Makefile.am: Added html: rule

2001-10-17 Sergey Poznyakoff

	* radlib/cryptpass.c: New function decrypt_password_broken()
	for decrypting long passwords (>16), sent by some
	brain-damaged termservers (MAX ascend in particular).
	
	* radlib/envar.c: (new) 'Environment variable' functions.
	* radlib/Makefile.am: Added envar.c
	* include/envar.h: (new) Envar protos.
	* include/Makefile.am: Added envar.h
	* include/checkrad.h: Use envar_t instead of RADCK_ARG
	* radiusd/checkrad.c: Likewise.
	* radiusd/files.c: Likewise.
	* radlib/nas.c: Likewise.
	New function nas_request_to_nas().

	* radlib/util.c: Removed RADCK_ARG-related stuff.

	* include/radius.h: Use envar_t instead of RADCK_ARG in
	struct NAS. Added proto for nas_request_to_nas(),
	decrypt_password_broken().
	* include/radiusd.h: Proto for req_decrypt_password().
	* radiusd/auth.c: New function req_decrypt_password().
	Checks for 'broken_passwd' var in NAS environment variables
	and if this variable is set, decrypt_password_broken() is
	used for decrypting the password.
	rad_check_password(): Use req_decrypt_password().
	* radiusd/menu.c: Use req_decrypt_password().
	* radiusd/radutil.c: Likewise.
	* radiusd/proxy.c: Fixed protos of passwd_recode() and
	rad_send_request(). Use req_decrypt_password().

2001-10-16 Sergey Poznyakoff

	* doc/texinfo/configure.texi: Cleaned up to to make tex happy.
	* doc/texinfo/radscm.texi: Likewise.

	* radiusd/auth.c: rad_check_password(): return AUTH_NOUSER if
	rad_sql_pass() returned	NULL. Fixed bug in outputting
	'SQL authentication not available' diagnostics (use of
	uninitialized var).
	* radiusd/files.c: Added some debugging info.
	checkdbm(): use dynamically allocated buffer instead of static one.
	* radlib/cryptpass.c: Null terminator was offset by one. Fixed.

	* TODO: Updated.
	* client/pam_radius/pam_radius.c: Namespace cleanup.
	
2001-10-16 Sergey Poznyakoff

	* include/radiusd.h: External declaration for radius_mode and
	MODE_ defines.
	* radiusd/radiusd.c: Removed static qualifier from radius_mode
	declaration.
	* radiusd/files.c: Check MODE_BUILDDBM to decide whether to
	parse `users' file.

2001-10-16 Sergey Poznyakoff

	Namespace cleanup.

	* include/radius.h: Data type defines are prefixed with TYPE_,
	request type defines -- with RT_, comparison operator defines --
	with OPERATOR_. 
	* configure.in: Likewise.
	* radiusd/acct.c: Likewise.
	* radiusd/auth.c: Likewise.
	* radiusd/builddbm.c: Likewise.
	* radiusd/files.c: Likewise.
	* radiusd/menu.c: Likewise.
	* radiusd/proxy.c: Likewise.
	* radiusd/radius.c: Likewise.
	* radiusd/radiusd.c: Likewise.
	* radiusd/radutil.c: Likewise.
	* radlib/avl.c: Likewise.
	* radlib/client.c: Likewise.
	* radlib/dict.c: Likewise.

2001-10-15 Sergey Poznyakoff

	* radiusd/auth.c: Allow for teminating \0 in mach->userpass.
	* radiusd/proxy.c: Allow for teminating \0 in password buffer.
	* radiusd/radutil.c: Removed superfluous string[AUTH_STRING_LEN] = 0. 
	* radlib/cryptpass.c: decrypt_password(): Append terminating
	null.

2001-10-15 Sergey Poznyakoff

	* configure.in: Removed superfluous backslashes in final AC_OUTPUT.
	* radiusd/proxy.c: Fixed bugs introduced yesterday.
	* radlib/client.c: Likewise (in function radclient_build_request).
	* TODO: Updated.

	* radiusd/config.y: Fixed action for `level: T_STRING' to work
	with `upto' severity specs (e.g.: `category debug').
	* raddb/config: Added default channel ang category statements.
	
2001-10-14 Sergey Poznyakoff

	Bunch of fixes to handle correctly passwords longer than 16 bytes:

	* radlib/cryptpass.c: (new) Functions for password
	encryption/decryption.
	* radlib/Makefile.am: Added cryptpass.c
	* radlib/client.c: radclient_build_request(): Use encrypt_password().

	* include/radius.h: Changes to struct radius_req: removed digest
	field, changed type of secret field (was char [], now char *).
	Secret now points to the shared secret from corresponding
	CLIENT structure (no free needed when freeing the request).
	Added protos for encrypt_password() and decrypt_password().
	* include/radiusd.h: Removed calc_digest() proto, changed
	calc_acctdigest(). Added proto for validate_client(). Changed
	process_menu() proto.
	* radiusd/acct.c: Changed invocation of calc_acctdigest().
	* radiusd/auth.c: Changed rad_check_password(): removed pw_digest
	argument. The function uses decrypt_password().
	rad_auth_init(): Do not free radreq upon failure. It is
	responsibility of the caller. Removed calc_digest check.
	rad_authenticate(): Changed call to process_menu().

	* radiusd/menu.c: process_menu(): removed pw_digest parameter;
	the function uses decrypt_password().
	* radiusd/proxy.c: Changes due to introduction of decrypt_password
	and to the changes in RADIUS_REQ structure.
	* radiusd/radius.c: Removed calc_digest().
	Introduced validate_client(). Removed digest parameter from
	calc_acctdigest().
	* radiusd/radiusd.c: auth_respond(): Free radreq if radrespond()
	failed.
	radrespond(): Return 1 if suspend flag is on. Call validate_client()
	early (see FIXME, though).
	* radiusd/radutil.c: Reflect introduction of decrypt_password().

	* NEWS: Reflect recent changes. The stuff is still unreadable for
	normal human beings.
	* TODO: Updated.

	* radiusd/files.c: Fixed wild_match(): it returned 0
	on partial matches.

	* scripts/config-conv: (new) A shell wrapper for config-conv.awk

	* doc/texinfo/acct.texi: Reorganised structure. 
	* doc/texinfo/attributes.texi: Likewise.
	* doc/texinfo/auth.texi: Likewise.
	* doc/texinfo/bugs.texi: Likewise.
	* doc/texinfo/builddbm.texi: Likewise. 
	* doc/texinfo/configure.texi: Likewise.
	* doc/texinfo/debug.texi: Likewise.
	* doc/texinfo/invoke.texi: Likewise.
	* doc/texinfo/logging.texi: Likewise.
	* doc/texinfo/naming.texi: Likewise.
	* doc/texinfo/operation.texi: Likewise.
	* doc/texinfo/radauth.texi: Likewise.
	* doc/texinfo/radctl.texi: Likewise.
	* doc/texinfo/radgrep.texi: Likewise.
	* doc/texinfo/radius.texi: Likewise.
	* doc/texinfo/radlast.texi: Likewise.
	* doc/texinfo/radping.texi: Likewise.
	* doc/texinfo/radscm.texi: Likewise.
	* doc/texinfo/raduse.texi: Likewise.
	* doc/texinfo/radwho.texi: Likewise.
	* doc/texinfo/radzap.texi: Likewise.

2001-10-04 Sergey Poznyakoff

	* .cvsignore: Added *.tar.gz

	* scripts/texi2html: (new)
	* scripts/Makefile.am: Added texi2html

	* doc/texinfo/Makefile.am: New rule for creating a monolithic html
	page.
	* doc/texinfo/acct.texi: Changes for easier convertion to html.
	* doc/texinfo/attributes.texi: Likewise.
	* doc/texinfo/auth.texi: Likewise.
	* doc/texinfo/bugs.texi: Likewise.
	* doc/texinfo/builddbm.texi: Likewise.
	* doc/texinfo/configure.texi: Likewise.
	* doc/texinfo/debug.texi: Likewise.
	* doc/texinfo/invoke.texi: Likewise.
	* doc/texinfo/logging.texi: Likewise.
	* doc/texinfo/naming.texi: Likewise.
	* doc/texinfo/operation.texi: Likewise.
	* doc/texinfo/radauth.texi: Likewise.
	* doc/texinfo/radctl.texi: Likewise.
	* doc/texinfo/radgrep.texi: Likewise.
	* doc/texinfo/radius.texi: Likewise.
	* doc/texinfo/radlast.texi: Likewise.
	* doc/texinfo/radping.texi: Likewise.
	* doc/texinfo/radscm.texi: Likewise.
	* doc/texinfo/raduse.texi: Likewise.
	* doc/texinfo/radwho.texi: Likewise.
	* doc/texinfo/radzap.texi: Likewise.

2001-10-04 Sergey Poznyakoff

	* doc/texinfo/.ispell_english: (new)
	* doc/texinfo/configure.texi: Updated.
	* doc/texinfo/intro.texi: Likewise.
	* doc/texinfo/invoke.texi: Likewise.
	* doc/texinfo/naming.texi: Likewise.
	* doc/texinfo/operation.texi: Likewise.
	* doc/texinfo/radius.texi: Likewise.
	* raddb/config.syntax: Likewise.
	* TODO: Likewise.

2001-09-30 Sergey Poznyakoff

	* Makefile.am: Added alphadist rule. Put both alpha rules
	under MAINTAINER_MODE conditional.
	* configure.in: Allow for colon-separated pathlists in 
	--with-{include|lib}-path.
	* raddb/Makefile.am: Fixed permissions on installed files.

	* doc/texinfo/operation.texi: Updated.

2001-09-30 Sergey Poznyakoff

	Started rewriting documentation.

	* doc/texinfo/radius.texinfo: removed
	* doc/texinfo/attributes.texinfo: removed

	* doc/texinfo/acct.texi: (new)
	* doc/texinfo/attributes.texi: (new)
	* doc/texinfo/auth.texi: (new)
	* doc/texinfo/bugs.texi: (new)
	* doc/texinfo/builddbm.texi: (new)
	* doc/texinfo/configure.texi: (new)
	* doc/texinfo/debug.texi: (new)
	* doc/texinfo/intro.texi: (new)
	* doc/texinfo/invoke.texi: (new)
	* doc/texinfo/logging.texi: (new)
	* doc/texinfo/naming.texi: (new)
	* doc/texinfo/operation.texi: (new)
	* doc/texinfo/radauth.texi: (new)
	* doc/texinfo/radctl.texi: (new)
	* doc/texinfo/radgrep.texi: (new)
	* doc/texinfo/radius.texi: (new)
	* doc/texinfo/radlast.texi: (new)
	* doc/texinfo/radping.texi: (new)
	* doc/texinfo/radscm.texi: (new)
	* doc/texinfo/raduse.texi: (new)
	* doc/texinfo/radwho.texi: (new)
	* doc/texinfo/radzap.texi: (new)
	* doc/texinfo/Makefile.am: Updated.

2001-09-29 Sergey Poznyakoff

	* configure.in: Options --with-include-path, --with-lib-path
	replace old --enable-add-.*-path options.

	* client/pam_radius/pam_radius.c: Fixed call to value_name_to_value.

	Changed semantics of Local and Crypt-Local auth-types. As before,
	Local means that the user's password is stored in cleantext and
	Crypt-Local means it is stored in a crypted form. The difference
	is that the value of password itself can be retrieved from
	different places, depending on the value of a new server attribute,
	Password-Location. The absense of this attribute means that
	the password is stored in Password or Crypt-Password attribute
	of the checklist in the users file. This provides backward
	compatibility with the previous implementations.
	Password-Location = SQL means that the password should be retrieved
	from SQL database using auth_query. More Password-Location values
	will be added as the need arises.

	Consequences:
	1. CHAP authentication can now coexist with SQL
	authentication type:

		Auth-Type = Local, Password-Location = SQL

	2. Auth-Type = SQL is actually translated to:

		Auth-Type = Crypt-Local, Password-Location = SQL
	
	* include/radiusd.h: Removed rad_check_password proto.
	* include/radsql.h: Changed rad_sql_pass() proto: accept two
	arguments and return a character string.
	* radiusd/sql.c: rad_sql_pass() returns a ponter to retrieved user
	password. The storage is allocated dynamically and must be efree'd.

	* raddb/dictionary: New attribute Password-Location describes 
	where to get the password for Local and Crypt-Local auth-types.
	When absent, the password is read from Password or Crypt-Password
	attribute. When set to SQL, cleantext or hashed password is retrieved
	from the SQL database.
	* radiusd/auth.c: Made rad_check_password() static to the module.
	Removed unused activefd parameter from its declaration. The function
	is essentially rewritten to accept new semantics of Local and Crypt-
	Local auth-types.
	* radiusd/files.c: Added DA_PASSWORD_LOCATION to server_check_items.
	* radiusd/radck.c: Updated fix_check_pairs() to accord with the new
	semantics of Local auth-types.
	
2001-09-25 Sergey Poznyakoff

	* Makefile.am: Added alpha: rule

	* include/radius.h: DICT_VALUE contains a pointer to entire
	DICT_ATTR structure, not just the attribute name. This
	facilitates look-ups.
	* include/sysdep.h: Forgotten defined(__sgi) :((

	* radlib/dict.c: Use linked lists for dictionary values.
	This reverses some part of changes from 2001-08-07. Reason:
	symtab provides no convenient way for multiple key indexing.

	value_name_to_value(): second argument: the attribute name
	the value belongs to.
	value_lookup(): Changed accordingly.

	* radiusd/files.c: Fixed invocation of value_name_to_value.
	* radscm/rscm_dict.c: Likewise.
	* radscm/rscm_lib.c: Likewise.
	* radlib/users.y: Likewise.

	* radlib/symtab.c: Preserve the order of entries in collision lists
	when rehashing.

2001-09-23 Sergey Poznyakoff

	* radscm/rscm_avl.c: (new) Scheme interface to some avl
	functions.
	* radscm/Makefile.am: Added rscm_avl.c
	* radscm/rscm_dict.c: Minor changes.
	* radscm/rscm_lib.c: radscm_cons_to_avp(): Initialize all VALUE_PAIR
	members.
	radscm_init(): added call to rscm_avl_init().

	* elisp/radconf-mode.el: Missed closing parenthesis in
	radconf-keyword-dict.

	* radiusd/auth.c: sfn_scheme(): scan the copy of reply
	pairlist, not the list itself, since it can be modified by
	scheme_auth().
	* radiusd/files.c: Removed spurious block of code in
	add_user_entry (sym_install now does all the job).
	hints_setup(): fixed error: wrong scope for tmp variable.
	Use avl_merge instead of avl_add_list.
	* radiusd/scheme.c: Call radscm_init().
	* radlib/avl.c: avp_move was broken, it always set new->next
	to NULL. Fixed.
	* radlib/symtab.c: Append symbols to the end of collision list,
	so that duplicate ones appear in chronological order.

2001-09-18 Sergey Poznyakoff

	* raddb/dictionary: Fixed syntax flags of some attributes.
	* radiusd/rewrite.y: Fixed interpret.
	* radiusd/auth.c: Removed spurious 'Authentication OK' message.
	Fixed call to interpret to match its proto. Do not replace
	strvalue with computed pair result, assign it directly instead.
	* radiusd/radutil.c: radius_xlate(): Allow for NULL req argument.
	(for test_shell).

	* radwho/radwho.c: Forgotten to commit on 2001-09-12.

	* THANKS: Added Eric Salome.

2001-09-18 Eric Salome

	* radiusd/auth.c: sfn_init(): Try to look up proxied request
	in the local user's database to fetch site-specific pairs.
	* radiusd/files.c: hints_setup(): Allow for use of
	Fall-Through attribute in raddb/hints.

2001-09-12 Sergey Poznyakoff
	
	* include/sysdep.h: Fixed to compile properly on IRIX (thanks to
	Michael Weizer.

	* THANKS: Added Michael Weizer.

2001-09-09 Sergey Poznyakoff

	* configure.in: AC_SUBST for RADSCM_BUILT_SOURCES and 
	GUILE_PROCEDURES_TXT.
	* radscm/Makefile.am: Removed extra dependencies that prevented
	the package from compiling without guile.
	
2001-09-06 Sergey Poznyakoff

	* radiusd/radiusd.c: Hold previous value of server_stat->auth.status
	in a global; trigger corresponding actions when it changes.
	* radiusd/snmpserv.c: Use auth.status for both AuthConfigReset
	and AcctConfigResetObjects. Make sure this variables always
	return RFC-prescribed values. GNU extensions are returned by
	radiusServerState variable.

2001-09-05 Sergey Poznyakoff

	* include/mem.h: Prefix xmalloc,xrealloc with "rad": they are
	apt to conflict with identifiers from other libs or
	programs (when used in pam_radius.so).
	* radiusd/radck.c: Likewise.
	* radlib/leakdetect.c: Likewise.
	* radlib/users.l: Likewise.
	* radlib/symtab.c: Likewise.
	Do not access hash_size with index < 0.

2001-09-04 Sergey Poznyakoff

	* client/pam_radius/pam_radius.c: Local variable name "errno"
	caused grief on systems where errno is a define. Renamed.
	* radiusd/log.c: Likewise.
	* radlib/applog.c: Likewise.

	* THANKS: Added Andrey Pavlenko.
	
2001-09-04 Sergey Poznyakoff

	* configure.in: Fixed erroneous AC_ARG_WITH specification
	for --without-server-guile option.
	Add GUILE_LIBS to RADIUSD_LDADD if USE_SERVER_GUILE is set.
	* radiusd/Makefile.am: Removes @GUILE_LIBS@ from radiusd_LDADD:
	taken care of in configure.in
	* radiusd/radiusd.c: Pass an argument to rad_main(). It is needed
	for builddbm only.
	rad_main(): assign the argument given to extra_arg static. Actually,
	this is a kludge and should be cleaned up.
	rad_mainloop(): become daemon only if we really have to.

2001-09-04 Sergey Poznyakoff

	Allow user to configure which characters are allowed in a
	username:

	* include/radiusd.h: Declaration for username_valid_chars.
	* radiusd/auth.c: Use global username_valid_chars instead of a
	static variable. username_valid_chars contains string object,
	consisting of characters allowed to appear in a username
	(alphanumeric chars are always allowed).
	* radiusd/config.kw: Added username-chars keyword.
	* radiusd/config.y: Handle username-chars statement (in option block)
	* radiusd/radiusd.c: Initialize username_valid_chars.
	* TODO: Updated.

	Other fixes:

	* radiusd/scheme.c: Initialize %load-path. Fixed scheme_load_path.

	* radlib/dict.c: Reverse symtab for attribute values. This restores
	the functionality of the daemon broken on 2001-08-07 with the
	introduction of symbol tables instead of linked lists, namely, that
	the last defined symbolic value is used when printing detail files.

	* radscripts/radctl.m4: Removed superfluous quotes around SHIFT.

2001-09-03 Sergey Poznyakoff

	* radiusd/log.c: static qualifiers to catname, priname.
	* radiusd/scheme.c: Fixed closure to eval_catch_body.
	* radiusd/sql.c: Fixed bug in rad_sql_attr_query: did not
	unattach connection if disp_sql_exec() returned NULL.
	

2001-09-02 Sergey Poznyakoff

	Further changes integrating Guile support.

	* Makefile.am: Reorganized subdirs.
	* configure.in: More sophisticated checking for working Guile
	libraries.

	* m4/guile.m4: (new) Test for working Guile libraries.
	* m4/Makefile.am: Added guile.m4
	* m4/rx.m4: Simplified a lot. There's no use checking for
	librx if we can just supply included rx.o

	* raddb/config.syntax: Added more comments.
	
	* radscm/radscm.h: (new) Protos for libradscm functions.
	* radscm/rscm_dict.c: (new) Scheme interface to radius dictionaries.
	* radscm/rscm_lib.c: (new) libradscm basic functions.
	* radscm/rscm_syslog.c: (new) Scheme interface to syslog.
	* radscm/rscm_utmp.c: (new) Scheme interface to radius [uw]tmp files.
	* radscm/.cvsignore: Added libradscm.a

	* raddb/dictionary: New attribute: Scheme-Acct-Procedure. Can be
	used in reply pairs of a hints profile to trigger execution
	of the given Scheme procedure on accounting events. The procedure
	takes one argument: the request A/V pairs. Return value is #f
	if accounting fails and #t otherwise.
	* radiusd/Makefile.am: Moved librad.a to the end of LDADD (needed
	for linking against libradscm.a)
	* radiusd/acct.c: Handle Scheme-Acct-Procedure attribute.
	* radiusd/log.c: Added static qualifier to chanlist.

	* acconfig.h: Changed USE_GUILE to USE_SERVER_GUILE.
	* radiusd/auth.c: Likewise.
	* radiusd/config.y: Likewise.
	* radiusd/radiusd.c: Likewise.
	* radiusd/version.c: Likewise.
	* radiusd/scheme.c: Likewise. Added scheme_acct(). Removed library-
	specific functions.

	* radscm/Makefile.am: Build libradscm.a.
	* radscm/radscm.c: Removed library-specific functions.

	* radscripts/Makefile.am: Removed `if GUILE' conditional.
	* radscripts/radtest.m4: Likewise.

	* include/radiusd.h: Protos for scheme_.*() functions.
	* elisp/radconf-mode.el: Recognize new keywords. Obsolete ones
	are retained for backward compatibility.

2001-09-01 Sergey Poznyakoff

	Started integrating Guile support into the server:

	* acconfig.h: New define: USE_GUILE
	* configure.in: New options: --without-guile, --without-server-guile.
	* include/radiusd.h: Protos for guile interface functions.
	* raddb/config.syntax: Sample guile configuration.
	* raddb/dictionary: New attribute: Scheme-Procedure. When encountered
	in reply pairs triggers evaluation of the specified guile procedure.
	The procedure takes three arguments: request pairs, check pairs
	and reply pairs. It returns cons, whose car contains #f to deny
	access, or anything else to allow it and whose cdr contains
	a list of A/V pairs to be appended to the reply list.
	* raddb/.gdbinit: Uncommented dir ../radlib.
	* radiusd/scheme.c: (new) Scheme interface functions.
	* radiusd/Makefile.am: Added scheme.c. Added guile libraries
	and include paths.
	* radiusd/auth.c: New state as_scheme gets triggered by the
	presense of Scheme-Attribute in the reply pairs.
	* radiusd/config.kw: Added guile-related keywords.
	* radiusd/config.y: Added guile-related rules.
	* radiusd/radiusd.c: Split main into several functions.
	Added use_guile global variable.
	* radiusd/version.c: Reveal USE_GUILE option, when configured
	with it.
	
2001-09-01 Sergey Poznyakoff

	* radiusd/config.kw: New keyword: password-expire-warning.
	* raddb/config.syntax: Sample password-expire-warning statement;
	* raddb/dictionary: Removed obsolete Server-Config attribute and
	its values.
	* radiusd/radiusd.c: Removed unused config_init() function.

	* radiusd/auth.c: Use asprintf for formatting Reply-Message.
	* radiusd/config.y: Handle password-expire-warning statement;
	Fixed bug in handling syslog statement.

	* scripts/config-conv.awk: Emit 'channel default' and 'category *'
	statements.

2001-08-31 Sergey Poznyakoff

	Further changes to the logging subsystem. The only left-to-do is 
		1. document changes.

	* radlib/log.c: Removed.
	* radlib/logger.c: (new) Provide basic log functionality.
	It is part of librad library. Programs willing to use
	logger.c must define function vlog() which is suppsoed to
	do the actual formatting and outputting job.
	* radlib/applog.c: (new) Logger system for rad.* applications.
	It is part of liblog library.
	* radlib/Makefile.am: Added logger.c, applog.c.

	* client/pam_radius/pam_radius.c: Implemented vlog().

	* radiusd/log.c: Removed functions provided by logger.c.

	* raddb/rewrite.full: Fixed bug in max_fixup() function: too
	few arguments in call to max_decode_port.

	Fixed handling of NAS-supplied attribute length. (See 2001-08-27)
	
	* radiusd/radius.c: Reverted changes introduced 2001-08-27. They
	break proxy functionality. String attributes may contain arbitrary
	binary data, so strlen() is not appropriate.
	* radiusd/radutil.c: Recompute string length before adding string
	contents to obstack.


2001-08-27 Sergey Poznyakoff

	* include/radiusd.h: Removed unused RLOG_PID define.
	* radiusd/config.y: Changed handling of 'category' statement.

2001-08-27 Sergey Poznyakoff

	* radiusd/auth.c: Do not display "Invalid user" diagnostics when
	print-auth is no.
	* radiusd/snmpserv.c: Fixed snmp_sort_nas_stat(): simple sorting
	of the nas_stat made the havoc in the statistics data.
	* radiusd/stat.c: findportbyindex(): Check the validity of 
	index before doing lookup.
	
2001-08-27 Sergey Poznyakoff

	* configure.in: Use $withval when handling --with arguments.
	* radiusd/config.y: Added "port" to typestr. Fixed handling of
	obsolete level statements (auth).
	Fixed buglet in asgn (handling AT_PORT type).
	* radiusd/radius.c: Do not trust attrlen when decoding string
	variables. Some NASes compute it including terminating zero byte.
	
2001-08-26 Sergey Poznyakoff

	* db/Makefile.am: Use M4 variable. Allow user to define database
	access password in config.m4.
	* db/config.m4: Allow user to specify database user name and password.
	* db/db.m4: Likewise.
	* db/mysql.m4: Likewise.
	* db/pgsql.m4: Likewise.

	More elaborate syntax checking of pairlist config files (raddb/users,
	raddb/hints and raddb/huntgroups). Each attribute has a set of
	properties describing it. A six-bit part of these properties
	describes in which list the attribute may appear in each of
	the above-mentioned files. The syntax of dictionary files
	is extended to hold the declaration of attribute properties.

	* include/radius.h: Renamed AF_ADD_ constants to AP_ADD_. New
	AP_PROPAGATE: attributes with this bit set will be propagated
	through the proxy radius back to the NAS. Packed additivity into
	the prop bitmask. Three sets of AF_CHECKLIST and AF_REPLYLIST
	flags.
	struct DICT_ATTR: merged flags and additivity into one member: prop
	struct VALUE_PAIR: Renamed additivity to prop.
	* raddb/dictionary: Changed flag field of ATTRIBUTE records to
	reflect the addition of AP_PROPAGATE property (P flag) and
	three levels of AF_.*LIST bits.
	* raddb/sqlserver: Changed description of %s substitute.

	* include/radiusd.h: Removed exec_group member.
	Added protos for functions from radck.c
	* radiusd/config.y: exec-program-group is obsolete.
	* radiusd/exec.c: Set the group from pw_gid member of pwd.

	* radiusd/files.c: Changed calls to fix_{check,reply}_pairs:
	pass an extra argument, meaning which kind of file we are processing
	now.
	Extra member in struct temp_list (same semantics).
	Extra argument to file_read (same semantics).

	* radiusd/proxy.c: Removed allowed[] array: the AP_PROPAGATE bit
	of attribute properties is used to determine whether an attribute
	should be propagated back to the NAS.

	* radiusd/radck.c: Use attribute property to determine whether an
	attribute is allowed to be used in either list of a profile.

	* radiusd/radius.c: Reflect changes of DICT_ATTR and VALUE_PAIR
	types.
	* radlib/users.y: Likewise.
	* radlib/avl.c: Likewise.
	New function avl_move_pairs() moves pairs matching a given criterium
	between the two lists. The criterium is specified by supplying
	selection function and a closure to it.
	Implemented avl_move_attr() via avl_move_pairs().

	* radiusd/radiusd.c: Initialize myip with INADDR_ANY. Removed
	`mode' (local to main) and introduced static `radius_mode' with
	the same semantics. listen_.*() functions exit immediately if
	its value is not MODE_DAEMON.
	Reflect removal of config.exec_group.
	Use myip instead of INADDR_ANY in calls to open_socket wherever
	hostlist passed to listen_.*() functions is empty.

	* radlib/dict.c: Parse extended attribute property specification.
	The specification may contain the following flags:

		Flag	Meaning
		P	Propagate the attribute through the proxy chain
		=	Additivity = replace
		+	Additivity = append
		N	Additivity = none
	
	and a syntax specification. The simplest form of the latter is
	[] meaning default syntax spec (the attribute may appear in either
	list in any configuration file). More precise specification
	is the symbol 'C' when the attribute may be used in checkpairs,
	or the symbol 'R' when it may appear in replypairs (thus CR is
	equivalent to []). The most specific form of the syntax spec is

		[CRCRCR]

	where the CR pairs correspond to raddb/users, raddb/hints and
	raddb/groups. A dash indicates that the attribute cannot be
	used in the corresponding list. 

	* scripts/config-conv.awk: Delete obsolete exec-program-group
	statement.
	
	* NEWS: Updated.

2001-08-25 Sergey Poznyakoff

	* db: (new dir) Contains scripts for automatic creation
	of authentication/accounting databases.
	* db/Makefile.am: (new)
	* db/.cvsignore: (new)
	* db/config.m4: (new) Template for site-specific definitions.
	* db/db.m4: (new) Implementation-independent database structure
	template.
	* db/mysql.m4: (new) MySQL-specific definitions.
	* db/pgsql.m4: (new) PostgreSQL-specific definitions.

	* Makefile.am: Added db to SUBDIRS
	* configure.in: AC_OUTPUT db/Makefile.am

	* raddb/sqlserver: Removed database description from the comment.
	Fixed sql queries to match new database structure.

2001-08-25 Sergey Poznyakoff

	Changed distribution technique: removed dist-hook from the
	main Makefile.am and provided separate Makefile.am's for
	each directory in the distribution.

	* contrib/Makefile.am contrib/.cvsignore: (new)
	* doc/rfc/Makefile.am doc/rfc/.cvsignore: (new)
	* mibs/Makefile.am mibs/.cvsignore: (new)
	* scripts/Makefile.am scripts/.cvsignore: (new)
	* scripts/guile/Makefile.am scripts/guile/.cvsignore: (new)
	* test/raddb/Makefile.am: (new)
	* test/raddb/.cvsignore: Added Makefile, Makefile.in

	* Makefile.am: Removed conditional GUILE block. Removed
	subdirs from EXTRA_DIST.Removed dist-hook. Removed TEST
	variables.
	* configure.in: Changed version number to pre-release 0.95.90.
	Added substitutions RADSCM and TESTDIR.
	AC_OUTPUT new makefiles.
	* doc/Makefile.am: Added rfc to SUBDIRS.
	* doc/man/Makefile.am: Added *.man to EXTRA_DIST. Changed explicit
	rules to use $@ and $<.
	* doc/texinfo/Makefile.am: Added radius_TEXINFOS.
	* radlib/Makefile.am: Merged noinst_HEADERS statements.
	* radscm/Makefile.am: Use substitution in bin_PROGRAMS,
	provide EXTRA_PROGRAMS in case the former is empty. Do not
	distribute *.x and *.doc files. Moved MKDEP variable out of
	the MAINTAINER_MODE conditional.

	* test/Makefile.am: Added TESTS and TESTS_ENVIRONMENT (previously
	they were in the main Makefile.am).
	* test/test.sh: Removed sub-shell invocation, fixed paths.

	Some minor fixes:

	* raddb/users: Removed ROOT profile, not needed since the removal
	of cntl functionality.
	
	* sql/disp.c: Fixed wrong comparison in disp_sql_interface_index().
	* radiusd/config.y: Fixed usage of in_category tie-in.

	* doc/texinfo/attributes.texinfo: Added @setfilename.

	* TODO: Updated.
	

2001-08-23 Sergey Poznyakoff

	Further changes to the logging subsystem. Left-to-do's are:
		1. Of course, document changes.
		2? (in the long run) Make radiusd/log.c part of liblog
		   library.

	* include/log.h: New option LO_PERSIST for marking
	channels that should not be deleted by log_release().
	* radiusd/log.c: log_release(): Do not delete channels
	marked with LO_PERSIST bit.
	log_set_to_console(): Mark "stdout" with LO_PERSIST bit.
	channel_free(): Fixed memory leak.

	* radlib/log.c: vlog(): use priname array instead of switch when
	printing priority name.

	* radlib/strcspn.c: (new) Provides a strcspn() function for
	systems lacking it.
	* radlib/Makefile.am: Added strcspn.c
	* configure.in: Added strcspn to AC_REPLACE.

	* scripts/config-conv.awk: (new) Convert raddb/config from
	version 0.95 to 0.96.

	Further changes due to the removal of cntl functionality:

	* radscm/radctl.scm: Removed. It is useless once all cntl
	functionality has been passed to SNMP subsystem. See TODO.
	* radscm/Makefile.am: Removed radctl.scm.
	* radscripts/radctl.m4: Removed cntl interface.

	* TODO: Updated.

2001-08-22 Sergey Poznyakoff

	Somewhat regretfully, removed radlib/radprintf.c, and
	switched to using snprintf functions instead of
	rad.*printf(). The latter were OK, but the only
	major advantage they provided was %I and %A specifiers,
	which are not such a big deal, after all. Besides, they
	make lint ang gcc -Wall angry...
	Points 1,2 and 4 of left-to-do's mentioned in the entry
	from yesterday remain in force.

	* configure.in: Check for snprintf function.
	* radlib/radprintf.c: removed.
	* radlib/snprintf.[ch]: (new) (v)snprintf replacement for
	systems lacking it.

	* radlib/util.c: debug_pair(), format_ipaddr(),
	format_pair() functions.
	* include/radius.h: Prototypes for the above functions.
	* include/radiusd.h: Removed not needed protos.
	* include/log.h: Removed prototypes for rad.*printf() functions.

	* radiusd/debugmod.c: Removed (generated file).
	* radlib/debugmod.c: Removed (generated file).

	* radiusd/.cvsignore: Added debugmod.c
	* radlib/.cvsignore: Added debugmod.c

        * client/pam_radius/pam_radius.c: Changed rad.*printf calls to
	(v)snprintf calls, using format_pair and format_ipaddr where
	necessary:
        * radiusd/acct.c: Likewise.
        * radiusd/auth.c: Likewise.
        * radiusd/builddbm.c: Likewise.
        * radiusd/checkrad.c: Likewise.
        * radiusd/config.y: Likewise.
        * radiusd/files.c: Likewise.
        * radiusd/log.c: Likewise.
        * radiusd/menu.c: Likewise.
        * radiusd/radiusd.c: Likewise.
        * radiusd/radutil.c: Likewise.
        * radiusd/rewrite.y: Likewise.
        * radiusd/snmpserv.c: Likewise.
        * radiusd/stat.c: Likewise.
        * radlib/avl.c: Likewise.
        * radlib/client.c: Likewise.
        * radlib/log.c: Likewise.
        * radlib/radutmp.c: Likewise.
        * radlib/strerror.c: Likewise.
        * radlib/util.c: Likewise.
        * raduse/raduse.c: Likewise.
        * sql/postgres.c: Likewise.

        * radlib/vasprintf.c: Reverted previous change.

	* include/radmibs.h: removed (generated file).

	* TODO: Removed radprintf-related entry.

        * radlib/Makefile.am: Added snprintf.[ch]. Moved headers to
	noinst_HEADERS variable. Removed -fAI from the lint invocation.

        * radiusd/Makefile.am: Removed -fAI from the lint invocation.
        * radlast/Makefile.am: Likewise.
        * radscm/Makefile.am: Likewise.
        * raduse/Makefile.am: Likewise.
        * radwho/Makefile.am: Likewise.
        * radzap/Makefile.am: Likewise.
        * sql/Makefile.am: Likewise.

2001-08-21 Sergey Poznyakoff

	Further changes to log subsystem. This commit compiles
	and runs fine. The rewriting of the logging stuff is
	not finished, though. Things to be done are:
		1. Make radiusd/log.c part of liblog library,
		   split off application-dependent stuff from it.
		2. Preserve "stdout" channel until exit(). Now
		   it gets nuked by log_release().
		3. Get rid of radprintf.c, use GNU snprintf instead.
		4. Of course, document changes.

	* include/log.h: Added L_UPTO() and some prototypes.
	* radiusd/acct.c: Call to log_open().
	* radiusd/auth.c: Call to log_open(). Use severity
	specifications in calls to radlog().
	* radiusd/proxy.c: Use severity	specifications in calls to radlog().
	* radiusd/snmpserv.c: Use log_open().
	* radiusd/config.y: Changed category <name> syntax. <Name>
	can now be any of:
		CATEGORY
		SEVERITY
		CATEGORY '.' SEVERITY
	SEVERITY allows '=' and '!' prefixes to specify exact match
	and exclusion of the given severity level.
	* radiusd/log.c: Added log_open() and log_close().
	vlog(): Fixed bug: asprintf() was erroneously called instead
	of vasprintf().
	Fixed declarations of catname[] and priname[].
	Added _dolog() function and fixed _debug_print.
	New functions:
		channel_free()	--   free memory allocated for a channel
		channel_free_list() -- free channel list starting from
			the given channel.
		log_mark()      --   return the head of the chanlist.
		log_release()   --   release all channels starting
			from the given one. Do all the necessary
			housekeeping.
		log_set_to_console() -- Request logging to the console
			(stderr).
		log_set_default() -- install default logging channel.
	
	channel_lookup(): Changed semantics of `pri' argument. 	

	* radiusd/radiusd.c: Set default logging channel. Use log_close()
	where appropriate.
	* radiusd/rewrite.y: rw_attrasgn(): Check for null return of
	avp_create() (happens only when raddb/dictionary and, consequently,
	include/raddict.h is malformed).

	* radlib/log.c: Fixed to match new logging subsystem.

	* radlib/dict.c: Fixed attr_number_to_dict().

	* radlib/vasprintf.c: Use radvsprintf() instead of
	vsprintf(). This is temporary. I guess, I'll have to get rid
	of radprintf.c and use GNU snprintf.c instead.

	* radlast/Makefile.am: Changed library linking order.
	* radscm/Makefile.am: Likewise.
	* raduse/Makefile.am: Likewise.
	* radwho/Makefile.am: Likewise.
	* radzap/Makefile.am: Likewise.

	* raddb/dictionary: Acct-Ext-Program and Log-Mode-Mask
	were assigned the same number. Fixed.
	* include/raddict.h: Likewise.

2001-08-20 Sergey Poznyakoff

	Started rewriting log subsystem. Log channels will now be
	separated on categories (main,auth,acct,snmp,proxy) as well
	as severity levels. The internal mechanics resembles that
	of syslog utility.

	NOTE: This commit does not compile. It misses some essential
	stuff.

	* radlib/vasprintf.c: (new) GNU (v)asprintf function. 
	* radlib/Makefile.am: Add vasprintf.c

	* include/log.h: Major rewrite. 
	* include/radiusd.h: Added RLOG_ constants and log_mode declaration.
	* radiusd/config.kw: Removed S_ constants. Changed their occurences
	to corresponding L_ constants from log.h
	Added print-category keyword (don't forget to document it!).
	* radiusd/config.y: Changed logging declaration syntax.
	* radiusd/log.c: Major rewrite.
	* radiusd/radiusd.c: Added log_mode definition.
	* radlib/debug.c: Removed debug_output(), debug_sprintf().

	* radlib/dict.c: Removed L_CONS occurences.
	* radlib/users.y: Likewise.

2001-08-20 Sergey Poznyakoff

	Changed debugging conventions. Each module that calls debug()
	functions should define symbol RADIUS_MODULE_<modulename>
	before inclusion of config.h. When a new module is added
	which uses debug facility, make debugmod should be run to
	update include/debugmod.h and ./debugmod.c.

	* scripts/debug.sh: Create a single header file instead of
	modifying each source.
	* Makefile.am: Split invocation of debug.sh among several lines
	for readability.
	* acconfig.h: Include <debugmod.h>

	* include/Makefile.am: Added debugmod.h
	* include/.cvsignore: Likewise.

	* test/Makefile.am: Added INCLUDES.
	* sql/Makefile.am: Use libsql_la_SOURCES instead of libsql_a_SOURCES.

	* radiusd/acct.c: Define RADIUS_MODULE_<modname> at the start.
	* radiusd/auth.c: Likewise.
	* radiusd/builddbm.c: Likewise.
	* radiusd/checkrad.c: Likewise.
	* radiusd/debugmod.c: Likewise.
	* radiusd/exec.c: Likewise.
	* radiusd/files.c: Likewise.
	* radiusd/notify.c: Likewise.
	* radiusd/pam.c: Likewise.
	* radiusd/proxy.c: Likewise.
	* radiusd/radius.c: Likewise.
	* radiusd/radiusd.c: Likewise.
	* radiusd/radutil.c: Likewise.
	* radiusd/rewrite.y: Likewise.
	* radiusd/snmpserv.c: Likewise.
	* radiusd/sql.c: Likewise.
	* radiusd/stat.c: Likewise.
	* radlib/debugmod.c: Likewise.
	* radlib/leakdetect.c: Likewise.
	* radlib/mem.c: Likewise.
	* radlib/users.y: Likewise.
	* sql/mysql.c: Likewise.
	* sql/postgres.c: Likewise.

2001-08-19 Sergey Poznyakoff

	Modified SQL interface: radiusd can now be configured to use
	both mysql and postgres. Switching between the two is controlled
	by "interface" statement in raddb/sqlserver file.

	* sql: (new dir): SQL interface library.
	* sql/Makefile.am: (new)
	* sql/.cvsignore: (new)
	* sql/disp.c: (new) SQL interface dispatcher.
	* sql/mysql.c: (new, from radlib/): MySQL interface functions.
	* sql/postgres.c: (new, from radlib/): Postgres interface functions.

	* radiusd/sql.c: Added "interface" keyword (raddb/sqlserver). Changed
	rad_sql_ calls to appropriate disp_sql_ ones.
	* radiusd/version.c: Changed SQL-related members of compile_flag_str[].
	* include/radsql.h: Prototypes for dispatching functions and data
	structures.
	* radiusd/Makefile.am: Changed SQL-related stuff.

	* radlib/mysql.c: Removed.
	* radlib/postgres.c: Removed.
	* radlib/Makefile.am: Removed mysql.c and postgres.c

	* Makefile.am: Added sql to SUBDIRS.
	* acconfig.h: Changed SQL-related defines.
	* acinclude.m4: rad_RESULT_ACTIONS (ported from GNU inetutils).
	* configure.in: Changed SQL-related defuns. New options: --with-mysql
	and --with-postgres (can be used together). --enable-sql is retained
	for backward compatibility.
	* m4/lib.m4: (new) rad_CHECK_LIB: check several paths for the presense
	of a library.
	* m4/Makefile.am: Added lib.m4

	* raddb/sqlserver: Added sample interface statement.

	* include/radctl.h: Removed.
	* include/Makefile.am: Removed radctl.h.
	
2001-08-19 Sergey Poznyakoff

	* radiusd/radiusd.c: Unlink pidfile on shutdown.
	* radlib/radpaths.c: Global variable radpid_dir.
	* include/radius.h: Declaration for radpid_dir.

	* radlib/client.c: Removed PORT_CNTL.
	* include/radclient.h: Likewise.

	* test/raddb/radctl.rc.in: Removed @CNTL_PORT@
	* test/test.scm: Restored functionality. rad-cntl uses
	signals instead of obsolete cntl interface.

	* radscm/radscm.c: rad-client-set-server: removed CNTL-NUM.

	* TODO: Updated.

2001-08-18 Sergey Poznyakoff

	* mibs/GNU-RADIUS-SERVER-MIB.txt: Updated.
	* mibs/GNU-RADIUS-SERVER-MIB.chart: Graphical representation
	of radiusServerMIB subtree.
	* mibs/radmibs.h.in: Updated.

	* radlib/mem.c: mem_stat_enumerate() accepts extra argument
	(closure).
	* include/mem.h: Likewise.
	* radiusd/radiusd.c: Likewise.

	* radiusd/snmpserv.c: Implemented whole radiusServerMIB subtree.
	snmp_sort_nas_stat(): Sort nas_stat structures so that GET NEXT
	on .NASIndex.<IP> returns next lexicografically greater oid.
	* radiusd/files.c: read_naslist_file(): call snmp_sort_nas_stat().
	* include/radiusd.h: Proto for snmp_sort_nas_stat().

	* radiusd/config.y: Set 'once' argument in calls to asgn() to 0,
	except when setting radlog_dir and radacct_dir. Possibly I can
	get rid of fourth argument to asgn() altogether?

	* TODO: Updated.

2001-08-18 Sergey Poznyakoff

	* radiusd/radiusd.c: sig_usr1(): changed due to the changes
	in underlying library functions.
	* radiusd/snmpserv.c: Implemented radiusServerQueueTable
	subtree.

	* radlib/mem.c: New functions: mem_get_stat() and
	mem_stat_enumerate() instead of meminfo().

	* include/mem.h: MEM_STAT, CLASS_STAT, declarations for
	mem_get_stat() and mem_enumerate().
	* include/radiusd.h: Changed proto for stat_request_list().
	Added typedef QUEUE_STAT.

2001-08-17 Sergey Poznyakoff

	* mibs/GNU-RADIUS-SERVER-MIB.txt: (new) MIBs describing internals
	of the radius daemon.
	* mibs/radmibs.h.in: Added mibs from GNU-RADIUS-SERVER-MIB.
	* radiusd/snmpserv.c: Implemented radiusServerUpTime and
	radiusServerResetTime. radiusServerState implemented partially
	(read-only).
	* include/radsnmp.h: New values for enum serv_stat: serv_suspended,
	serv_shutdown.
	* radiusd/config.y: Fixed bug in the action for 'severity' rule.

2001-08-16 Sergey Poznyakoff

	Removed control port support from radiusd/. All its functionality
	is to be transferred to snmp. Implemented listening to multiple
	interfaces/ports.

	* radiusd/radctl.c: Removed.
	* radiusd/Makefile.am: Removed radctl.c.
	* radiusd/config.y: New keyword: "listen". Currently it is used
	in auth and acct statements. "cntl" statement is obsolete: retained
	for backward compatibility.
	* radiusd/config.kw: Added "listen" keyword.
	* radiusd/radiusd.c: Removed cntl_port. Implemented listening
	to multiple interfaces/ports.
	getmyip(): removed hostname length restriction.
	* include/radiusd.h: Added declaration for HOSTDECL. Removed cntl_port.

	* raddb/config: Reflect changes in the syntax.
	* raddb/config.status: Likewise.
	* raddb/huntgroups: Removed cntl-specific huntgroups.

	* radlib/leakdetect.c: Added xrealloc(), erealloc().
	* include/mem.h: Protos for the above.

	* radiusd/files.c: realm_find(): do not return DEFAULT realm when asked
	for NOREALM.

	* test/raddb/config.in: Removed CNTL_PORT.
	* test/test.sh: Removed CNTL_PORT.
	* test/raddb/users: Removed ROOT.
	* test/raddb/huntgroups: Removed cntl-specific huntgroups.
	* test/raddb/test.scm: Removed cntl-specific functions.

	NOTE: currently `make check' does not work due to the lack of
	radctl functionality.

	* TODO: Updated.
	* NEWS: Updated. I should make it understandable to human beings
	when I'm through doing the changes.

2001-08-15 Sergey Poznyakoff

	* radiusd/radutil.c: Do not add extra spaces after expanding
	%C{Password}. 
	* radiusd/proxy.c: Fixup string length after stripping off
	LOCAL realm (Reported by Michael Smirnov). Handle NOREALM
	special realm.
	* radiusd/files.c: Handle NOREALM special realm.
	* radiusd/radiusd.c: Removed check for @ before calling proxy_send().

	* THANKS: Added Michael Smirnov.
	* TODO: Updated.

2001-08-10 Sergey Poznyakoff
	* ylwrap: New option -stdout allows to run programs that send
	their output to stdout (e.g. gperf)
	* configure.in: Added check for gperf
	* radiusd/config.y: Split off keyword recognizer into a separate
	module.
	* radiusd/config.kw: (new) Keywords for config.y. To be processed
	by gperf.
	* radiusd/Makefile.am: Added rules for config.kw.

	* configure.in: Changed version number (0.96-alpha.1)

	* include/radiusd.h: Removed definitions specific for librad.
	* inlcude/radius.h: Added librad-specific definitions.
	struct NAS: changed last member.

	All sources: changes due to the above.

	* raduse/raduse.c: Removed duplication of nas_ functions.
	* radzap/radzap.c: Likewise.

2001-08-07 Sergey Poznyakoff
	* radlib/argcv.c: Fixed bug in argcv_get: it was filling an extra
	argv slot.
	* radiusd/sql.c: Execute group_query and attr_query only if doauth
	is yes.

	* radiusd/symtab.c: Moved to radlib.

	* radlib/symtab.c: (new from ../radiusd): Added re-hashing.
	Changed return value of install/lookup functions from Symbol*
	to void* to eliminate superfluous typecasts.
	* include/symtab.h: New prototypes.

	* radlib/dict.c: Use symtabs for attributes and values. Removed
	length limit on symbol names.

	* include/radiusd.h: Changed DICT_ATTR and DICT_VALUE to fit the
	new allocation mechanism (symtabs instead of slists).

	* test/raddb/sqlserver: removed query_buffer_size claus.

2001-07-31 Sergey Poznyakoff <gray@farlep.net>
	Bunch of changes to make %C{Password} substitution return plaintext
	password. In the meantime, unified calling conventions a bit:

	* include/radiusd.h: Fixed protos for user_find(), hints_setup(),
	radius_exec_program(), radius_xlate().
	* include/radsql.h: Added proto for rad_sql_attr_query().
	* radiusd/acct.c: Fixed calls to hints_setup() and
	radius_exec_program().
	* radiusd/auth.c: Fixed calls to hints_setup(), user_find(),
	radius_exec_program().
	* radiusd/builddbm.c: Changed prototype of user_find_db().
	* radiusd/exec.c: Changed prototype of radius_exec_program().
	* radiusd/files.c: Changed protos of user_find(), user_find_sym(),
	user_find_db(), match_user(), hints_setup().
	* radiusd/radctl.c: Fixed call to user_find().
	* radiusd/radutil.c: Changed proto of attr_to_str(), radius_xlate().
	* radiusd/sql.c: Fixed calls to radius_xlate(). Changed proto of
	rad_sql_attr_query().

	* radlib/dbm.c: Fixed erroneous `#if' directive.


2001-07-30 Sergey Poznyakoff <gray@farlep.net>
	* radlib/argcv.c: argcv_get(): Terminate output argv with NULL
	entry.
	* radiusd/exec.c: Fixed bug in installing SIGCHLD handler
	introduced 2001-07-25.
	* radiusd/radutil.c: Fixed handling of NULL default value.
	* raddb/rewrite.full: Synched declaration of max_decode_port()
	with that in the documentation.
	

2001-07-25 Sergey Poznyakoff <gray@farlep.net>
	* radiusd/acct.c: added external accounting (function rad_acct_ext).
	Renamed rad_accounting_orig -> rad_acct_detail,
	rad_accounting_new -> rad_acct_system for consistency.
	* radiusd/radutil.c: Modified radius_xlate & friends to use obstack
	instead of fixed size output array. This removes buffer size
	restrictions. Added provisions for specifying default values
	for undefined attributes (shell-like syntax: %{Acct-Sessison-Time:-0},
	%{Acct-Sessison-Time:?not defined}, etc.).
	* radiusd/exec.c: Use argcv_get() instead of ad hoc parsing. Check for
	NULL before dereferencing reply. Changed invocations of radius_xlate()
	to conform to its new syntax.
	* radiusd/sql.c,radiusd/files.c: Changed invocations of radius_xlate()
	to conform to its new syntax.
	* include/radsql.h: removed buf member.
	* include/radiusd.h: Changed proto for radius_xlate(). Removed
	typedef BUFFER.
	* raddb/dictionary: Added Acct-Ext-Program attribute.
	* raddb/sqlserver: Removed query_buffer_size.

	* radlib/avl.c: avp_free(): free associated strvalue if p->eval is
	set.

	* raduse/raduse.c: Changed formatting of time values. The previous
	version was affected by LC_TIME settings.


2001-07-16 Sergey Poznyakoff <gray@farlep.net>
	* configure.in: When --with-client is specified build any part
	of client that can be built.
	* Makefile.am: Remove conditional BUILD_CLIENT block.
	* client/pam_radius/pam_radius.c: Fixed erroneous call to strtok().
	* client/pam_radius/Makefile.am: Substitution for pam_PROGRAMS.
	* client/nas/Makefile.am: Substitution for libexec_SCRIPTS so the
	client can still be built when GUILE is not installed.

2001-07-12 Sergey Poznyakoff <gray@farlep.net>
	Added possibility to defer evaluation of a reply pair value. To
	defer evaluation of a pair, it should be specified in raddb/users
	(or hints, huntgroups) in the following form:

		NAME = "=function(arg1,arg2,...)"

	`function' must be defined in raddb/rewrite.

	* radlib/argcv.c: (new, from GNU mailutils) Split a string on
	whitespace and given delimiters.
	* radlib/Makefile.am: Added argcv.c. Sorted SOURCES.
	* include/argcv.h: (new) Protos for argcv_.*() calls.
	* include/Makefile.am: Added argcv.h.
	* radiusd/rewrite.y: Modified interpret() to use argcv_ functions.
	* include/radiusd.h: Added eval member to VALUE_PAIR structure.
	Added proto for bug_report_address.
	* radiusd/auth.c: Evaluate a/v pairs with eval flag set.
	* radlib/users.y: Support for deferred evaluation.
	* radlib/radprintf.c: Print correctly pairs with deferred evaluation.
	* radiusd/files.c: Likewise.

	* radlib/users.l: Support for $INCLUDE and $DEBUG directives.
	* radlast/radlast.c: Fixed inappropriate usage of nas_lookup_ip() 
	functions, introduced 2001-07-09.

	* ylwrap: Modified sed expr to change lines `# line "lex.yy.c"'
	to `# line "sourcename.c"'

	* radlib/radpaths.c: Added bug_report_address.
	* radiusd/radiusd.c: Added 'Report bugs to..' to the --help output.
	* radiusd/version.c: Likewise.
	* radlast/radlast.c: Likewise.
	* raduse/raduse.c: Likewise.
	* radwho/radwho.c: Likewise.
	* radzap/radzap.c: Likewise.

	* configure.in: Changed version number (0.96-alpha.1).

2001-07-09 Sergey Poznyakoff <gray@farlep.net>
	* m4/Makefile.am: (new)
	* m4/maintain.m4: (new) Enable maintainer-specific definitions
	* configure.in: use rad_MAINTAINER_MODE
	* include/Makefile.am: Added EXTRA_DIST
	* include/snmp/Makefile.am: (new)
	* */Makefile.am: removed spurious CFLAGS assignments.
	Removed spurious -I statements in INCLUDES.
	Changes due to addition of new Makefile.am's.
	* radlib/Makefile.am: Moved yacc- and lex-generated sources to
	MAINTAINERCLEANFILES,
	* radiusd/Makefile.am: Likewise.

	* radlib/nas.c: (new) nas database functions
	* radlib/util.c: Added RADCK_ARG functions (from radiusd/files.c)
	* radlast/nasutil.c: removed.
	* radlast/radlast.c: changes due to introduction of radlib/nas.c

	* radiusd/version.c: Forgotten to commit on 2001-07-04.

	* include/checkrad.h: Protos for radck_ functions.
	* include/radiusd.h: Namespace housekeeping: normalized nas database
	function names (nas_ and client_ ).
	* radiusd/acct.c: Likewise.
	* radiusd/auth.c: Likewise.
	* radiusd/files.c: Likewise.
	* radiusd/proxy.c: Likewise.
	* radiusd/radctl.c: Likewise.
	* radiusd/radius.c: Likewise.
	* radiusd/radiusd.c: Likewise.
	* radiusd/snmpserv.c: Likewise.
	* radiusd/sql.c: Likewise.
	* radiusd/stat.c: Likewise.


2001-07-04  Sergey Poznyakoff <gray@farlep.net>
	* include/sysdep.h,radiusd/version.c: Added support for
	OpenBSD (Thanks to Andrey Pavlenko <lance@evitel.net>).
	* radiusd/timestr.c: Fixed typo in comment. Improved
	standalone mode.
	* radlast/radlast.c: defer processing the -n option until
	radpath_init() is called.
	* client/pam_radius/pam_radius.c: assign a unique messg_id
	after creating radclient structure. This is needed if a
	client program calls pam_authenticate() several times.
	

2001-06-20  Sergey Poznyakoff <gray@farlep.net>
	* radscm/session.scm: added NAS-IP-Address to the packet
	  sent by rad-acct.
	* ylwrap: updated version based on the last snapshot from
	  automake CVS repository.
	* radiusd/auth.c: report CLID along with multiple login
	  diagnostics.
	* */.cvsignore: updated.

2001-06-07  Sergey Poznyakoff <gray@farlep.net>
	* radiusd/rewrite.y: fixed potential heap overflow in pushn().
          Fix in interpret (coredumped when missed '(').
	* Changed my username to real name in ChangeLog :^)
 
2001-06-01  Peter Kazmier           <pete@kazmier.com>
	* radiusd/radiusd.c, radiusd/sql.c, include/radsql.h: fixed
	  expiring of SQL connections.

2001-05-24  Sergey Poznyakoff <gray@farlep.net>
	* client/pam/pam_radius.c: finished namespace houskeeping.
	  Added debugging hook. Fixed trivial bugs in DEBUG macros.

2001-05-22  Sergey Poznyakoff <gray@farlep.net>
	* radlib/radutmp.c: fall back to readonly mode if the file can't
	  be opened read-write.
	* doc/COPYING.FDL: added
	* Changes in configure.in, */Makefile.am: provide replacements
          for obstack.*, getopt_long, rx.c functions when not present.
        * radiusd/radiusd.c, radwho/radwho.c, radlast/radlast.c,
          raduse/raduse.c, radzap/radzap.c: 
           Get rid of `#ifdef HAVE_GETOPT_LONG', since GNU getopt is
          now always present.
        * radiusd/radiusd.c: The same for HAVE_REGCOMP...

2001-05-21  Sergey Poznyakoff <gray@farlep.net>
	* radiusd/auth.c: fixed is_log_mode()
	* raddb/Makefile.am: added config.syntax to the distribution

2001-05-20  Sergey Poznyakoff <gray@farlep.net>
	* Removed radlib/fixalloc.c
	* Further namespace houskeeping:
		renamed AUTH_REQ to RADIUS_REQ

2001-05-19  Sergey Poznyakoff <gray@farlep.net>
	* Additivity and flags in DICT_ATTR structure. Additivity
        is a property of the attribute that determines the action
	to be taken if an attempt is made to add the A/V pair
	to the list that already contains a pair with given
	attribute. There are three possible actions:
		None(Drop)   -- any subsequent additions of the
				attribute are ignored;
		Replace	     -- the new A/V pair replaces the old
				one;
		Append	     -- the new pair is appended to the
				end of the list.
	Flags determine whether the attribute can be used in check or
	reply list in raddb/users.
	* Namespace housekeeping. Various pair.*, .*pair functions
	renamed:
		 pairmove_single --	avp_move
		 pairmove2	--	avl_move_attr
		 pairfree	--	avl_free
		 free_pair	--	avp_free
		 pairfind	--	avl_find
		 pairdelete	--	avl_delete
		 pairmove	--	avl_merge
		 pairlistadd	--	avl_add_list
		 pairadd	--	avl_add_pair
		 paircopy	--	avl_dup
		 pairdup	--	avp_dup
		 create_pair	--	avp_create
        avl_.* functions operate upon A/V lists, avp_.* functions
	operate upon A/V pairs.

2001-05-18  Sergey Poznyakoff <gray@farlep.net>
	* Made backslash() global
	* Modified raddb.c to accept \<newline> continuation sequence.
	* Restored '-' notify reply semantics (see 2001-05-09)

2001-05-17  Sergey Poznyakoff <gray@farlep.net>
	* rad_sql_reconnect did not clear conn->connected on failure. 
	  Probably conn->connected is not needed after all: can just 
	  use conn->data != NULL instead.

2001-05-11  Sergey Poznyakoff <gray@farlep.net>
	Debugged radscm/nas.scm interaction.

2001-05-11  Michael Samuel   <michael@miknet.net>
        Added possibility to retrieve arbitrary reply pairs from
        the SQL database.

2001-05-10  Sergey Poznyakoff <gray@farlep.net>
	* Added Guile functions for dealing with rad[uw]tmp files.
	* radlib/log.c: use rad?printf() functions instead of ?printf().
	* radscripts/Makefile.am: use of _SCRIPTS instead of _PROGRAMS.

2001-05-09  Sergey Poznyakoff <gray@farlep.net>
	* notify.c: return 0 ttl when the peer responds with '-'.
	Reported by Andrey Y. Mosienko <feo@ttn.ru>
	* Added radwtmp_putent() function (radlib/radutmp.c), modified
	  other sources accordingly.

2001-05-08  Sergey Poznyakoff <gray@farlep.net>
	radscm/ sources: added autogeneration of *.x, *.doc files.
	Changed function declarations in radscm/radscm.c accordingly.
	Also added scripts/guile directory: see comment at the start of
	scripts/guile/guile-doc-snarf to find out why.

2001-05-06  Sergey Poznyakoff <gray@farlep.net>
	* Added m4 directory and modified configure.in.
	* create_dbm() in DBM_DBM mode used malformed filenames.
	* implemented ylwrap in makefiles
	* Added radlib/radutmp.c. Changed related sources accordingly.
	* Cleaned up rad_accounting_new().

2001-05-05  Sergey Poznyakoff <gray@farlep.net>
	Added client suite. Converted Makefile.am's to use libtool.
	Added Makefile.am to raddb subdirectory.

2001-04-28  Sergey Poznyakoff <gray@farlep.net>
	Fixed errors in acct_stop_query and acct_keepalive_query in
	the default sqlserver file. Reported by Oleg Gawriloff 
	<Oleg_Gawriloff@atlantm.com>.

2001-04-26  Sergey Poznyakoff <gray@farlep.net>
	Added AM_PROG_CC_STDC to configure.in. Modified postgres.c
	to properly handle fatal error conditions. Reported by
	Andrew Kohlsmith <akohlsmith@benshaw.com>.

2001-04-19  Sergey Poznyakoff <gray@farlep.net>
	Fixed radiusd/timestr.c. Fixed radiusd/version.c so the
	native AIX compiler does not bail out (reported by
	Adrean P. van Bloois <adrian@accu.uu.nl>).

2001-04-17  Sergey Poznyakoff <gray@farlep.net>
	Fixed getopt_long detection in configure.in.

2001-04-12  Sergey Poznyakoff <gray@farlep.net>	
	Written radconf-mode.el -- a major mode for editing raddb/config
	file.

2001-04-11  Sergey Poznyakoff <gray@farlep.net>
	Fixed bug in radiusd/sql.c which prevented acct_keepalive_query
	from working.

2001-04-10  Sergey Poznyakoff <gray@farlep.net>
	Modified radlast.c to exit gracefully on keyboard interrupt.

2001-04-07  Sergey Poznyakoff <gray@farlep.net>
	Added elisp directory. Written radius-mode.el -- a major
	mode for editing files raddb/users,hints,huntgroups.

2001-03-31  Sergey Poznyakoff <gray@farlep.net>
	Fixed bug in radiusd/proxy.c that caused A/V pairs to be freed
	twice. Improved debug()s. 
	Inserted calls to insist() in critical places of radlib/mem.c.
	Probably these should be enabled only when in maintainer mode...

2001-03-30  Sergey Poznyakoff <gray@farlep.net>
	Fixes in snmplib/snmp_sess.c.
	Moved private SNMP MIBs to the enterprise number assigned by IANA.

2001-03-27  Sergey Poznyakoff <gray@farlep.net>
	Changed Stat MIBs and snmpserv.c so that previous ..Date
        variables be returned as unix timestamp values.

2001-03-25  Sergey Poznyakoff <gray@farlep.net>
	snmpserv.c completely rewritten. Stat MIBs are slightly changed
	to provide for easier indexing of data.

2001-03-20  Sergey Poznyakoff <gray@farlep.net>
	Changed typedef ipaddr to ipaddr_t to prevent possible name
	clashes (snmplib, include/snmp/snmp.h). Fixed inclusion of
	<sys/time.h>, <time.h> in sysdep.h.

2001-03-19  Sergey Poznyakoff <gray@farlep.net>
	Added Log-Mode-Mask attribute. The attribute modifies logging
	mode for a given username/hint-group. Works like UNIX umask,
	i.e. effective-log-mode = log_mode & ~Log-Mode-Mask.

2001-03-18  Sergey Poznyakoff <gray@farlep.net>
	Finally finished writing SNMP library and attached it instead
	of hacked up CMU version used previously. Adapted
	radiusd/checkrad.c and radiusd/snmpserv.c for new calling 
	conventions. The latter seems to need good rewriting.

2001-03-17  Sergey Poznyakoff <gray@farlep.net>
	Discovered and chopped memory leak in radiusd/checkrad.c. The
	effect of the leak would be noticeable only if running radiusd
	long enough with continuous SNMP polling of NASes.

2001-03-15  Sergey Poznyakoff <gray@farlep.net>
	Removed unnecessary radlog.h from includes. 
	Moved system-dependent calls to radlib/sysdep.c.
	Introduced getmaxfd() call instead of supposing an arbitrary 
	number of open file descriptors (radiusd/radiusd.c, radiusd/exec.c).
	Added check to the length of Password attribute in radiusd/client.c.

2001-03-14  Sergey Poznyakoff <gray@farlep.net>
	Added @ to the array of symbols allowed in a username.
	Thanks to Jody Owens for reporting the bug.
        Added NULL pointer check to rad_pam_conv: Solaris does 
	not pass appdata_ptr if the server is not running euid 0. Why?

2001-03-13  Sergey Poznyakoff <gray@farlep.net>
	Added ! to the array of symbols allowed in a username.
	Got rid of last annoying traces of snprinf calls in
	snmplib. Have to rewrite snmplib as soon as possible.

2001-03-10  Sergey Poznyakoff <gray@farlep.net>
	Rewritten radiusd/pam.c. 
	Modified radiusd/log.c so that it echoes log messages to
	console until the program detaches from it. Improved string
	handling in radlib/users.l

2001-03-09  Sergey Poznyakoff <gray@farlep.net>
	Added semantic checks for `users' and `hints' files.
	Integrated builddbm into radiusd.

2001-03-05  Sergey Poznyakoff <gray@farlep.net>
	Fixed DBM file handling. Now it provides the same functionality
	as plaintext user database.

2001-03-04  Sergey Poznyakoff <gray@farlep.net>
	Introduced Auth-Data attribute. Currently it is handled
	by Pam and SQL Auth-Types.

2001-03-02  Sergey Poznyakoff <gray@farlep.net>
	Introduced HAVE_SETEUID switches to radiusd/exec.c.

2001-03-01  Sergey Poznyakoff <gray@farlep.net>
	Changed setlinebuf() in radiusd/radiusd.c to setvbuf(). Added
	check for <sys/select.h> needed by AIX. Reported by Alexandre Oliva.

2001-02-28  Sergey Poznyakoff <gray@farlep.net>
	groupcheck() did not attempt to fetch group name from SQL
	database. Fixed it. Added group_query to raddb/sqlserver.
	Added necessary changes to radlib/mysql.c and radlib/postgres.c
	This requires the use of an additional attribute (Queue-Id) which
	seems to be a kludge.

2001-02-25  Sergey Poznyakoff <gray@farlep.net>
	Added radsprintf functions. Fixed statements in configure.in and
	*/Makefile.am which were not compatible with Digital Unix and
	Solaris. Patches kindly donated by Alexandre Oliva <oliva@gnu.org>.

2001-02-18  Sergey Poznyakoff <gray@farlep.net>
	radiusd/timestr.c completely rewritten. The new version is
	much faster and does a reliable error-checking.

2001-02-17  Sergey Poznyakoff <gray@farlep.net>
	Integrated checkrad into radiusd. Fixed some bugs in rewrite.y

2001-02-14  Sergey Poznyakoff <gray@farlep.net>
	Introduced Match-Profile and Include-Profile attributes.
	Introduced BEGIN keyword in users.

2001-02-12  Sergey Poznyakoff <gray@farlep.net>
	Modified checkrad to use snmplib instead of calling external
	process.

2001-02-08  Sergey Poznyakoff <gray@farlep.net>
	Introduced realm quotas. Added extra entry to radutmp structure
	to keep the realm's handling server. Size of the structure did
	not change, so it should be compatible with previous versions.
	Added extra format flag `realm' to radwho. 

2001-02-06  Sergey Poznyakoff <gray@farlep.net>
	Fixed handling of integer objects in radscm/radscm.c (added
	bignums). Improved test/test.scm. 

2001-02-04  Sergey Poznyakoff <gray@farlep.net>
	Fixed radiusd/timestr.c to allow for "descending" time strings
	(Al1800-0100)

2001-02-01  Sergey Poznyakoff <gray@farlep.net>
	Added -i option (source IP address) to radiusd.
	Fixed nasty bug in radscm/radscm.c:radclient_alloc_server
	(missing return statement).
	Added some additional checks to configure.
	Added acct_alive_query keyword to raddb/sqlserver and
	modified radiusd/acct.c to handle this type of queries.

2001-01-31  Sergey Poznyakoff <gray@farlep.net>
	Fixed alignment bug in radlib/mem.c Thanks to Oswaldo E. Aguirre M.
	<oaguirre@reacciun.ve>.
	Fixed radlib/md5.c (did not work on Sparks). 

2001-01-23  Sergey Poznyakoff <gray@farlep.net>
	Added boolean shortcut evaluation and bitwise operations
	to rewrite.y

2001-01-17  Sergey Poznyakoff <gray@farlep.net>
	Finished writing radscm. Wrote guile modules which replace radctl
	and radtest programs. Removed radctl and radtest subdirs from the 
	distribution. Also added radctl.m4 to radscripts directory, so that
	the functionality of old radctl is preserved.
	
2001-01-16  Sergey Poznyakoff <gray@farlep.net>
	Fixed bugs in menu.c

2001-01-15  Sergey Poznyakoff <gray@farlep.net>
	Removed --with-etcdir from configure.in. 
	Removed setting directory permissions to ETC_DIR in
	install-data-local in Makefile.am. Thanks to
	Alexandre Oliva <oliva@gnu.org> who proposed both
	changes.

2001-01-10  Sergey Poznyakoff <gray@farlep.net>
	Started writing radscm -- a guile interface to radius functions.
	I suppose it will obsolete both radctl and radtest as they could
	be written as guile modules.

2001-01-08  Sergey Poznyakoff <gray@farlep.net>
	Added loops to rewrite.y

2000-12-28  Sergey Poznyakoff <gray@farlep.net>
	Removed radiusd/oldconfig.c. Its functionality moved to
	radlib/raddb.c. raddb.c does not restrict input field lengths, 
	though calling functions still restrict it.
	radlib/dict.c rewritten from scratch.
	Removed support for ATTRIB_NMC keyword in dictionaries. 
	
2000-12-26  Sergey Poznyakoff <gray@farlep.net>
	Cached digest info in AUTH_REQ structure for authentication
	requests.

2000-12-25  Sergey Poznyakoff <gray@farlep.net>
	Added support for PostgreSQL and fixed some bugs in sql.c

2000-12-20  Sergey Poznyakoff <gray@farlep.net>
	Replaced radlib/md5.c and raduse/screen.c

2000-12-18  Sergey Poznyakoff <gray@farlep.net>
        Update of /export/cvsroot/radius/test
        In directory Mirddin:/export/home/gray/radius/test
        
        Modified Files:
        	acct.off.t acct.on.t acct.start.t acct.stop.t auth.t
        Log Message:

2000-12-18  Sergey Poznyakoff <gray@farlep.net>
        Update of /export/cvsroot/radius/scripts
        In directory Mirddin:/export/home/gray/radius/scripts
        
        Modified Files:
        	dict.awk
        Log Message:
        Modified comment handling
        
2000-12-18  Sergey Poznyakoff <gray@farlep.net>
        Update of /export/cvsroot/radius/radzap
        In directory Mirddin:/export/home/gray/radius/radzap
        
        Modified Files:
        	radzap.c
        Log Message:

2000-12-18  Sergey Poznyakoff <gray@farlep.net>
        Update of /export/cvsroot/radius/radwho
        In directory Mirddin:/export/home/gray/radius/radwho
        
        Modified Files:
        	radwho.c
        Log Message:
        Completely rewritten.
        
2000-12-18  Sergey Poznyakoff <gray@farlep.net>
        Update of /export/cvsroot/radius/raduse
        In directory Mirddin:/export/home/gray/radius/raduse
        
        Modified Files:
        	raduse.c

2000-12-18  Sergey Poznyakoff <gray@farlep.net>
        Update of /export/cvsroot/radius/radtest
        In directory Mirddin:/export/home/gray/radius/radtest
        
        Modified Files:
        	debugmod.c gram.y input.l main.c radtest.c symtab.c
        Log Message:
        Addedd assignments in command line (without any option). Modified
        type handling in command line assignments. Added VSA handling.

2000-12-18  Sergey Poznyakoff <gray@farlep.net>
        Update of /export/cvsroot/radius/radscripts
        In directory Mirddin:/export/home/gray/radius/radscripts
        
        Modified Files:
        	Makefile.in radauth.m4
        Log Message:
        Adapted radauth.m4 to changes made in radtest

2000-12-18  Sergey Poznyakoff <gray@farlep.net>
        Update of /export/cvsroot/radius/radiusd
        In directory Mirddin:/export/home/gray/radius/radiusd
        
        Modified Files:
        	config.y debugmod.c files.c menu.c radiusd.c sql.c symtab.c

2000-12-18  Sergey Poznyakoff <gray@farlep.net>
        Update of /export/cvsroot/radius/raddb
        In directory Mirddin:/export/home/gray/radius/raddb
        
        Modified Files:
        	config config.syntax dictionary dictionary.cisco
        	dictionary.compat dictionary.livingston dictionary.merit
        	dictionary.tunnel dictionary.usr hints huntgroups users
        Added Files:
        	access.deny dictionary.voip
        Removed Files:
        	ippool radius.deny
        Log Message:
        Browsed and cleaned up all files. Also renamed radius.deny to
        access.deny

2000-12-18  Sergey Poznyakoff <gray@farlep.net>
        Update of /export/cvsroot/radius/radctl
        In directory Mirddin:/export/home/gray/radius/radctl
        
        Modified Files:
        	radctl.c
        Log Message:
        Commands and options are made consistent

2000-12-12  Sergey Poznyakoff <gray@farlep.net>
        Update of /export/cvsroot/radius/test
        In directory Mirddin:/export/home/gray/radius/test
        
        Modified Files:
        	auth.t portmap2.t

2000-12-12  Sergey Poznyakoff <gray@farlep.net>
        Update of /export/cvsroot/radius/radtest
        In directory Mirddin:/export/home/gray/radius/radtest
        
        Modified Files:
        	input.l main.c
        Log Message:
        Fixed string handling in input.l. It is now able to
        read strings with escaped char sequences.
        Added special feature to main.c: if argument contains
        equal sign it is supposed to be an assignment. This obsoletes
        the -a option.

2000-12-12  Sergey Poznyakoff <gray@farlep.net>
        Update of /export/cvsroot/radius/radscripts
        In directory Mirddin:/export/home/gray/radius/radscripts
        
        Modified Files:
        	Makefile.in
        Log Message:

2000-12-12  Sergey Poznyakoff <gray@farlep.net>
        Update of /export/cvsroot/radius/radiusd
        In directory Mirddin:/export/home/gray/radius/radiusd
        
        Modified Files:
        	config.y files.c radiusd.c rewrite.y sql.c symtab.c
        Log Message:
        Removed portmapping support. Its functionality is now
        provided by a rewrite feature, which is much more clever :)

2000-12-12  Sergey Poznyakoff <gray@farlep.net>
        Update of /export/cvsroot/radius/raddb
        In directory Mirddin:/export/home/gray/radius/raddb
        
        Modified Files:
        	config.syntax dictionary dictionary.cisco
        Added Files:
        	rewrite
        Removed Files:
        	portmap
        Log Message:
        Removed portmapping support. Its functionality is now
        provided by a rewrite feature, which is much more clever :)
        
2000-12-12  Sergey Poznyakoff <gray@farlep.net>
        Update of /export/cvsroot/radius/include
        In directory Mirddin:/export/home/gray/radius/include
        
        Modified Files:
        	radiusd.h
        Log Message:
        
2000-12-12  Sergey Poznyakoff <gray@farlep.net>
        Update of /export/cvsroot/radius/doc/texinfo
        In directory Mirddin:/export/home/gray/radius/doc/texinfo
        
        Added Files:
        	Makefile.am mdate-sh radius.texinfo version.texi
        Log Message:
        Started writing texinfo doc.

2000-12-12  Sergey Poznyakoff <gray@farlep.net>
        Update of /export/cvsroot/radius/doc
        In directory Mirddin:/export/home/gray/radius/doc
        
        Removed Files:
        	1 Makefile.am builddbm.8.m4 builddbm.8rad config.m4 include.m4
        	mkconfig.sed r.8rad radctl.8.m4 radctl.8rad radgrep.1.m4
        	radgrep.1rad radiusd.8.m4 radiusd.8rad radlast.1.m4
        	radlast.1rad radping.8.m4 radping.8rad radtest.8.m4
        	radtest.8rad raduse.1.m4 raduse.1rad radwho.1.m4 radwho.1rad
        	radzap.8.m4 radzap.8rad rfc1157.txt rfc2138.txt rfc2618.txt
        	rfc2619.txt rfc2620.txt rfc2621.txt rfc2865.txt rfc2866.txt
        	rfc2867.txt rfc2868.txt rfc2869.txt rfc2882.txt template
        Log Message:
        Documentation files are now distributed to corresponding
        directories. Started writing texinfo doc.
        
2000-12-12  Sergey Poznyakoff <gray@farlep.net>
        Update of /export/cvsroot/radius
        In directory Mirddin:/export/home/gray/radius
        
        Modified Files:
        	acconfig.h configure configure.in
        Log Message:
        Removed --enable-decode-ascend-ports, since it is now provided
        by raddb/rewrite
        
2000-12-08  Sergey Poznyakoff <gray@farlep.net>
        Update of /export/cvsroot/radius/doc/html
        In directory Mirddin:/export/home/gray/radius/doc/html
        
        Log Message:
        Directory /export/cvsroot/radius/doc/html added to the repository
        
2000-12-08  Sergey Poznyakoff <gray@farlep.net>
        Update of /export/cvsroot/radius/doc/texinfo
        In directory Mirddin:/export/home/gray/radius/doc/texinfo
        
        Log Message:
        Directory /export/cvsroot/radius/doc/texinfo added to the repository

2000-12-08  Sergey Poznyakoff <gray@farlep.net>
        Update of /export/cvsroot/radius/doc/man
        In directory Mirddin:/export/home/gray/radius/doc/man
        
        Log Message:
        Directory /export/cvsroot/radius/doc/man added to the repository
        
2000-12-07  Sergey Poznyakoff <gray@farlep.net>
        Update of /export/cvsroot/radius/radiusd
        In directory Mirddin:/export/home/gray/radius/radiusd
        
        Modified Files:
        	rewrite.y
        Log Message:
        Fixed some errors in multiline #define's

2000-12-07  Sergey Poznyakoff <gray@farlep.net>
        Update of /export/cvsroot/radius/doc
        In directory Mirddin:/export/home/gray/radius/doc
        
        Removed Files:
        	builddbm.8 radctl.8 radgrep.1 radiusd.8 radlast.1 radping.8
        	radtest.8 raduse.1 radwho.1 radzap.8
        Log Message:
        Removed unnecessary files. These should be generated on build stage.
        
2000-12-07  Sergey Poznyakoff <gray@farlep.net>
        Update of /export/cvsroot/radius/radiusd
        In directory Mirddin:/export/home/gray/radius/radiusd
        
        Modified Files:
        	Makefile.am acct.c auth.c config.y debugmod.c exec.c files.c
        	ippool.c log.c menu.c mysql.c notify.c oldconfig.c proxy.c
        	radctl.c radiusd.c radutil.c snmpserv.c sql.c stat.c symtab.c
        	version.c
        Added Files:
        	rewrite.y
        Removed Files:
        	portmap.y
        Log Message:
        radiusd.c:      Added request_cleanup call to rad_spawn_child (when
        		sending signal to the child, the parent does not
        		receive any SIGCHLD, thus all the house-keeping
        		should be done immediately after calling kill())
        sql.c           request_setup always returns 0 (Ok), thus allowing
        		the daemon to proceed with another accounting method
        		when SQL fails.
        Added rewriting module. If the request matches a huntgroup with
        Rewrite-Function attribute, the value of the latter is taken as
        a name of a function to apply to the check packet. The rewriting
        functions are defined in the file `raddb/rewrite'. The language
        is similar to C, though much more primitive.
        
2000-12-07  Sergey Poznyakoff <gray@farlep.net>
        Update of /export/cvsroot/radius/raddb
        In directory Mirddin:/export/home/gray/radius/raddb
        
        Modified Files:
        	dictionary
        Log Message:
        First official GNU version.
        Added special attribute: Rewrite-Function. It is used to specify the
        name
        of the rewriting function for the packets matching the huntgroup.
        
2000-12-07  Sergey Poznyakoff <gray@farlep.net>
        Update of /export/cvsroot/radius/include
        In directory Mirddin:/export/home/gray/radius/include
        
        Modified Files:
        	display.h ippool.h log.h mem.h msg.h nas.h parser.h radctl.h
        	raddict.h radius.h radiusd.h radlast.h radlog.h radutmp.h
        	radwho.h symtab.h
        Removed Files:
        	portmap.h
        Log Message:
        First official GNU version.
        Portmapping support has been removed and replaced by generalized
        rewriting functions.
        
2000-12-01  Sergey Poznyakoff <gray@farlep.net>
        Update of /export/cvsroot/radius/radiusd
        In directory Mirddin:/export/home/gray/radius/radiusd
        
        Modified Files:
        	portmap.y
        Log Message:
        
2000-12-01  Sergey Poznyakoff <gray@farlep.net>
        Update of /export/cvsroot/radius/checkrad
        In directory Mirddin:/export/home/gray/radius/checkrad
        
        Modified Files:
        	log.c
        Log Message:
        Fixed assignment error:
        	logfile = stderr;

2000-12-01  Sergey Poznyakoff <gray@farlep.net>
        Update of /export/cvsroot/radius/raddb
        In directory Mirddin:/export/home/gray/radius/raddb
        
        Modified Files:
        	portmap
        Log Message:
        

